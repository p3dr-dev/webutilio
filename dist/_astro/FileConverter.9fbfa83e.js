import{j as e}from"./jsx-runtime.3a2d0367.js";import{r as l}from"./index.b2a7ed32.js";import{L as U}from"./LoadingSpinner.d3c04f9a.js";import{u as L}from"./utils.b058de7b.js";const E=({lang:y})=>{const r=L(y),[a,u]=l.useState(null),[N,b]=l.useState(""),[i,c]=l.useState(""),[m,f]=l.useState("png"),[o,g]=l.useState(!1),[h,p]=l.useState(""),v=l.useRef(null),x={"image/jpeg":["png","webp","jpeg"],"image/png":["jpeg","webp","png"],"image/webp":["jpeg","png","webp"]},C=t=>{const n=t.target.files?.[0];if(n&&n.type.startsWith("image/")){u(n),b(URL.createObjectURL(n)),c(""),p("");const s=n.type;x[s]&&f(x[s][0])}else p(r("components.fileConverter.errorInvalidFile")),u(null),b("")},k=()=>{if(!a)return;g(!0),c("");const t=new FileReader;t.onload=n=>{const s=new Image;s.onload=()=>{const d=document.createElement("canvas");d.width=s.width,d.height=s.height;const j=d.getContext("2d");if(!j){p(r("components.fileConverter.errorCanvas")),g(!1);return}j.drawImage(s,0,0),d.toBlob(w=>{w&&c(URL.createObjectURL(w)),g(!1)},`image/${m}`,.95)},s.src=n.target?.result},t.readAsDataURL(a)},F=()=>a?`${a.name.substring(0,a.name.lastIndexOf("."))}.${m}`:"download";return e.jsxs("div",{className:"relative bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[o&&e.jsx(U,{text:r("components.fileConverter.converting")}),e.jsx("input",{type:"file",accept:"image/jpeg, image/png, image/webp",onChange:C,className:"hidden",ref:v}),e.jsx("button",{onClick:()=>v.current?.click(),disabled:o,className:"w-full bg-purple-600 text-white font-bold py-3 px-4 rounded-md hover:bg-purple-700 transition-colors disabled:bg-purple-400 dark:disabled:bg-purple-800",children:r("components.fileConverter.selectImage")}),h&&e.jsx("p",{className:"text-red-500 mt-4 text-center",children:h}),a&&e.jsxs("div",{className:`mt-6 ${o?"opacity-20":""}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:r("components.fileConverter.original")}),e.jsx("img",{src:N,alt:"Original",className:"mt-2 rounded-lg shadow-sm mx-auto max-h-60"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:a.type})]}),o?e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin my-8"}):e.jsx("p",{className:"text-3xl font-light text-gray-400",children:"â†’"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:r("components.fileConverter.converted")}),i?e.jsx("img",{src:i,alt:"Convertido",className:"mt-2 rounded-lg shadow-sm mx-auto max-h-60"}):e.jsx("div",{className:"mt-2 flex items-center justify-center h-60 w-80 bg-gray-100 rounded-lg dark:bg-gray-700",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r("components.fileConverter.waiting")})})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[e.jsx("label",{htmlFor:"format-select",className:"font-medium text-gray-700 dark:text-gray-300",children:r("components.fileConverter.convertTo")}),e.jsx("select",{id:"format-select",value:m,onChange:t=>f(t.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",disabled:o,children:(x[a.type]||["jpeg","png","webp"]).map(t=>e.jsx("option",{value:t,children:t.toUpperCase()},t))}),e.jsx("button",{onClick:k,disabled:o,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-2 px-6 rounded-md hover:bg-green-600 transition-colors disabled:bg-green-300 dark:disabled:bg-green-800",children:r("components.fileConverter.convert")})]}),i&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("a",{href:i,download:F(),className:"inline-block bg-blue-500 text-white font-bold py-2 px-8 rounded-md hover:bg-blue-600 transition-colors disabled:bg-blue-300 dark:disabled:bg-blue-800",children:r("components.fileConverter.download")})})]})]})};export{E as default};
