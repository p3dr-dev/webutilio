import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{r as n}from"./index.yGrMsBkE.js";import{L as U}from"./LoadingSpinner.Dvz2bPl4.js";import{u as C}from"./utils.BtV3MdL8.js";import"./index.yBjzXJbu.js";const $=({lang:v})=>{const t=C(v),[s,f]=n.useState(null),[z,y]=n.useState(null),[x,p]=n.useState(null),[m,h]=n.useState(""),[g,b]=n.useState(""),[c,u]=n.useState(!1),[j,o]=n.useState(null),N=n.useRef(null),w=r=>{const a=r.target.files?.[0];if(a&&a.type.startsWith("image/")){f(a),y(URL.createObjectURL(a)),p(null),o(null),h(""),b("");const l=new FileReader;l.onload=i=>{const d=new Image;d.onload=()=>{h(d.width),b(d.height)},d.src=i.target?.result},l.readAsDataURL(a)}else o(t("components.imageResizer.errorInvalidFile")),f(null),y(null)},k=n.useCallback(()=>{if(!s||m===""||g===""){o(t("components.imageResizer.errorDimensions"));return}u(!0),p(null),o(null);const r=new FileReader;r.onload=a=>{const l=new Image;l.onload=()=>{const i=document.createElement("canvas");i.width=m,i.height=g;const d=i.getContext("2d");if(!d){o(t("components.imageResizer.errorCanvas")),u(!1);return}d.drawImage(l,0,0,i.width,i.height),i.toBlob(R=>{R&&p(URL.createObjectURL(R)),u(!1)},s.type)},l.onerror=()=>{o(t("components.imageResizer.errorLoadingImage")),u(!1)},l.src=a.target?.result},r.onerror=()=>{o(t("components.imageResizer.errorReadingFile")),u(!1)},r.readAsDataURL(s)},[s,m,g,t]),I=r=>{r.preventDefault(),r.stopPropagation();const a=r.dataTransfer.files?.[0];a&&w({target:{files:[a]}})},L=r=>{r.preventDefault(),r.stopPropagation()},D=r=>{r.preventDefault(),r.stopPropagation()},O=()=>{if(!s)return"resized_image";const r=s.name.substring(0,s.name.lastIndexOf(".")),a=s.name.substring(s.name.lastIndexOf(".")+1);return`${r}_resized.${a}`};return e.jsxs("div",{className:"relative bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[c&&e.jsx(U,{text:t("components.imageResizer.resizing")}),e.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden",ref:N}),e.jsxs("div",{onDrop:I,onDragOver:L,onDragLeave:D,className:"flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-lg transition-colors border-gray-300 dark:border-gray-600",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("components.imageResizer.dragAndDrop")}),e.jsx("button",{onClick:()=>N.current?.click(),disabled:c,className:"w-auto bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-700 transition-colors disabled:bg-purple-400 dark:disabled:bg-purple-800",children:t("components.imageResizer.selectImage")})]}),j&&e.jsx("p",{className:"text-red-500 mt-4 text-center",children:j}),s&&e.jsxs("div",{className:`mt-6 ${c?"opacity-20":""}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.imageResizer.original")}),e.jsx("img",{src:z||"",alt:"Original",className:"mt-2 rounded-lg shadow-sm mx-auto max-h-60"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s.name})]}),c?e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin my-8"}):e.jsx("p",{className:"text-3xl font-light text-gray-400",children:"â†’"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.imageResizer.resized")}),x?e.jsx("img",{src:x,alt:"Redimensionada",className:"mt-2 rounded-lg shadow-sm mx-auto max-h-60"}):e.jsx("div",{className:"mt-2 flex items-center justify-center h-60 w-80 bg-gray-100 rounded-lg dark:bg-gray-700",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("components.imageResizer.waiting")})})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[e.jsxs("label",{htmlFor:"width-input",className:"font-medium text-gray-700 dark:text-gray-300",children:[t("components.imageResizer.width"),":"]}),e.jsx("input",{id:"width-input",type:"number",value:m,onChange:r=>h(r.target.value===""?"":Number(r.target.value)),className:"flex-grow p-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Largura",min:"1"}),e.jsxs("label",{htmlFor:"height-input",className:"font-medium text-gray-700 dark:text-gray-300",children:[t("components.imageResizer.height"),":"]}),e.jsx("input",{id:"height-input",type:"number",value:g,onChange:r=>b(r.target.value===""?"":Number(r.target.value)),className:"flex-grow p-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Altura",min:"1"}),e.jsx("button",{onClick:k,disabled:c||m===""||g===""||Number(m)<=0||Number(g)<=0,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-2 px-6 rounded-md hover:bg-green-600 transition-colors disabled:bg-green-300 dark:disabled:bg-green-800",children:t("components.imageResizer.resizeButton")})]}),x&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("a",{href:x,download:O(),className:"inline-block bg-blue-500 text-white font-bold py-2 px-8 rounded-md hover:bg-blue-600 transition-colors",children:t("components.imageResizer.download")})})]})]})};export{$ as default};
