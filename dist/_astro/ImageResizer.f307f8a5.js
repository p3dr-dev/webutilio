import{j as e}from"./jsx-runtime.3a2d0367.js";import{r as n}from"./index.b2a7ed32.js";import{u as F,L as E}from"./useLoadingPhrases.57f5e175.js";import{u as A}from"./utils.311eb264.js";const W=({lang:z})=>{const t=A(z),[s,j]=n.useState(null),[p,R]=n.useState(null),[o,h]=n.useState(null),[m,f]=n.useState(""),[c,b]=n.useState(""),[u,x]=n.useState(!1),[N,l]=n.useState(null),[I,y]=n.useState(!1),w=n.useRef(null),L=F(u);n.useEffect(()=>()=>{p&&URL.revokeObjectURL(p),o&&URL.revokeObjectURL(o)},[p,o]);const v=r=>{const a=r.target.files?.[0];if(a&&a.type.startsWith("image/")){j(a),R(URL.createObjectURL(a)),h(null),l(null),f(""),b("");const d=new FileReader;d.onload=i=>{const g=new Image;g.onload=()=>{f(g.width),b(g.height)},g.src=i.target?.result},d.readAsDataURL(a)}else l(t("components.imageResizer.errorInvalidFile")),j(null),R(null)},D=n.useCallback(()=>{if(!s||m===""||c===""){l(t("components.imageResizer.errorDimensions"));return}x(!0),h(null),l(null);const r=new FileReader;r.onload=a=>{const d=new Image;d.onload=()=>{const i=document.createElement("canvas");i.width=m,i.height=c;const g=i.getContext("2d");if(!g){l(t("components.imageResizer.errorCanvas")),x(!1);return}g.drawImage(d,0,0,i.width,i.height),i.toBlob(k=>{k&&h(URL.createObjectURL(k)),x(!1)},s.type)},d.onerror=()=>{l(t("components.imageResizer.errorLoadingImage")),x(!1)},d.src=a.target?.result},r.onerror=()=>{l(t("components.imageResizer.errorReadingFile")),x(!1)},r.readAsDataURL(s)},[s,m,c,t]),U=r=>{r.preventDefault(),r.stopPropagation(),y(!1);const a=r.dataTransfer.files?.[0];a&&v({target:{files:[a]}})},O=r=>{r.preventDefault(),r.stopPropagation(),y(!0)},C=r=>{r.preventDefault(),r.stopPropagation(),y(!1)},S=()=>{if(!s)return"resized_image";const r=s.name.substring(0,s.name.lastIndexOf(".")),a=s.name.substring(s.name.lastIndexOf(".")+1);return`${r}_resized.${a}`};return e.jsxs("div",{className:"relative bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[u&&e.jsx(E,{text:L}),e.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",ref:w}),e.jsxs("div",{onDrop:U,onDragOver:O,onDragLeave:C,className:`flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-lg transition-colors ${I?"border-purple-600 bg-purple-50 dark:bg-gray-700":"border-gray-300 dark:border-gray-600"}`,children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("components.imageResizer.dragAndDrop")}),e.jsx("button",{onClick:()=>w.current?.click(),disabled:u,className:"w-auto bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-700 transition-colors disabled:bg-purple-400 dark:disabled:bg-purple-800",children:t("components.imageResizer.selectImage")})]}),N&&e.jsx("p",{className:"text-red-500 mt-4 text-center",children:N}),s&&e.jsxs("div",{className:`mt-6 ${u?"opacity-20":""}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.imageResizer.original")}),e.jsx("img",{src:p||"",alt:"Original",className:"mt-2 rounded-lg shadow-sm mx-auto max-h-60"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s.name})]}),u?e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin my-8"}):e.jsx("p",{className:"text-3xl font-light text-gray-400",children:"â†’"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.imageResizer.resized")}),o?e.jsx("img",{src:o,alt:"Redimensionada",className:"mt-2 rounded-lg shadow-sm mx-auto max-h-60"}):e.jsx("div",{className:"mt-2 flex items-center justify-center h-60 w-80 bg-gray-100 rounded-lg dark:bg-gray-700",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("components.imageResizer.waiting")})})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[e.jsxs("label",{htmlFor:"width-input",className:"font-medium text-gray-700 dark:text-gray-300",children:[t("components.imageResizer.width"),":"]}),e.jsx("input",{id:"width-input",type:"number",value:m,onChange:r=>f(r.target.value===""?"":Number(r.target.value)),className:"flex-grow p-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Largura",min:"1"}),e.jsxs("label",{htmlFor:"height-input",className:"font-medium text-gray-700 dark:text-gray-300",children:[t("components.imageResizer.height"),":"]}),e.jsx("input",{id:"height-input",type:"number",value:c,onChange:r=>b(r.target.value===""?"":Number(r.target.value)),className:"flex-grow p-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Altura",min:"1"}),e.jsx("button",{onClick:D,disabled:u||m===""||c===""||Number(m)<=0||Number(c)<=0,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-2 px-6 rounded-md hover:bg-green-600 transition-colors disabled:bg-green-300 dark:disabled:bg-green-800",children:t("components.imageResizer.resizeButton")})]}),o&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("a",{href:o,download:S(),className:"inline-block bg-blue-500 text-white font-bold py-2 px-8 rounded-md hover:bg-blue-600 transition-colors",children:t("components.imageResizer.download")})})]})]})};export{W as default};
