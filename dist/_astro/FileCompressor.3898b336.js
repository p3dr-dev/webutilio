import{j as s}from"./jsx-runtime.3a2d0367.js";import{r as o}from"./index.b2a7ed32.js";import{J as z}from"./jszip.min.3141a9e6.js";import{u as E,L as O}from"./useLoadingPhrases.57f5e175.js";import{u as P}from"./utils.311eb264.js";import"./_commonjsHelpers.725317a4.js";import"./_commonjs-dynamic-modules.302442b1.js";const G=({lang:N})=>{const t=P(N),[n,g]=o.useState([]),[a,f]=o.useState(!1),[x,l]=o.useState(""),[i,p]=o.useState(null),[k,m]=o.useState(null),[v,h]=o.useState(""),[C,u]=o.useState(!1),b=o.useRef(null),w=E(a);o.useEffect(()=>()=>{i&&URL.revokeObjectURL(i)},[i]);const y=e=>{e&&e.length>0&&(g(r=>[...r,...Array.from(e)]),p(null),m(null),l(""))},D=e=>{y(e.target.files)},S=e=>{e.preventDefault(),e.stopPropagation(),u(!1),y(e.dataTransfer.files)},F=e=>{e.preventDefault(),e.stopPropagation(),u(!0)},L=e=>{e.preventDefault(),e.stopPropagation(),u(!1)},j=e=>{if(e===null||e===0)return"0 Bytes";const r=1024,c=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,d)).toFixed(2))+" "+c[d]},B=async()=>{if(!n||n.length===0){l(t("components.fileCompressor.errorNoFiles"));return}f(!0),l(""),p(null),m(null);try{let e;const r=new z;for(let c=0;c<n.length;c++){const d=n[c];r.file(d.name,d)}e=await r.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),h("compressed.zip"),p(URL.createObjectURL(e)),m(e.size)}catch(e){l(`${t("components.fileCompressor.errorCompressing")} ${e.message}`)}finally{f(!1)}},R=()=>{g([]),p(null),m(null),h(""),l("")};return s.jsxs("div",{className:"relative bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[a&&s.jsx(O,{text:w}),s.jsx("input",{type:"file",multiple:!0,onChange:D,className:"hidden",ref:b}),s.jsxs("div",{onDrop:S,onDragOver:F,onDragLeave:L,className:`flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-lg transition-colors ${C?"border-purple-600 bg-purple-50 dark:bg-gray-700":"border-gray-300 dark:border-gray-600"}`,children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("components.fileCompressor.dragAndDrop")}),s.jsx("button",{onClick:()=>b.current?.click(),disabled:a,className:"w-auto bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-700 transition-colors disabled:bg-purple-400 dark:disabled:bg-purple-800",children:t("components.fileCompressor.selectFiles")})]}),x&&s.jsx("p",{className:"text-red-500 mt-4 text-center",children:x}),n.length>0&&s.jsxs("div",{className:`mt-6 text-center ${a?"opacity-20":""}`,children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.fileCompressor.selectedFilesTitle")}),s.jsx("ul",{className:"text-left list-disc list-inside bg-gray-50 dark:bg-gray-700 p-4 rounded-md my-4 max-h-48 overflow-y-auto",children:n.map((e,r)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:[e.name," (",j(e.size),")"]},r))}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:B,disabled:a,className:"w-auto bg-green-500 text-white font-bold py-2 px-6 rounded-md hover:bg-green-600 transition-colors disabled:bg-green-300 dark:disabled:bg-green-800",children:t("components.fileCompressor.compressButton")}),s.jsx("button",{onClick:R,className:"w-auto bg-gray-500 text-white font-bold py-2 px-6 rounded-md hover:bg-gray-600 transition-colors",children:t("components.fileCompressor.clear")})]}),i&&s.jsxs("div",{className:"mt-6",children:[s.jsx("p",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.fileCompressor.compressedFileReadyTitle")}),s.jsx("p",{className:"font-bold text-green-600 dark:text-green-400",children:j(k)}),s.jsx("a",{href:i,download:v,className:"mt-4 inline-block bg-blue-500 text-white font-bold py-2 px-8 rounded-md hover:bg-blue-600 transition-colors",children:t("components.fileCompressor.download")})]})]})]})};export{G as default};
