import{j as s}from"./jsx-runtime.3a2d0367.js";import{r as o}from"./index.b2a7ed32.js";import{J as B}from"./jszip.min.9732e024.js";import{L as F}from"./LoadingSpinner.d3c04f9a.js";import{u as L}from"./utils.b058de7b.js";import"./_commonjs-dynamic-modules.23156833.js";const U=({lang:j})=>{const t=L(j),[n,g]=o.useState([]),[c,u]=o.useState(!1),[f,a]=o.useState(""),[x,d]=o.useState(null),[N,p]=o.useState(null),[k,m]=o.useState(!1),h=o.useRef(null),b=e=>{e&&e.length>0&&(g(r=>[...r,...Array.from(e)]),d(null),p(null),a(""))},v=e=>{b(e.target.files)},w=e=>{e.preventDefault(),e.stopPropagation(),m(!1),b(e.dataTransfer.files)},C=e=>{e.preventDefault(),e.stopPropagation(),m(!0)},D=e=>{e.preventDefault(),e.stopPropagation(),m(!1)},y=e=>{if(e===null||e===0)return"0 Bytes";const r=1024,l=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,i)).toFixed(2))+" "+l[i]},S=async()=>{if(!n||n.length===0){a(t("components.fileCompressor.errorNoFiles"));return}u(!0),a(""),d(null),p(null);try{const e=new B;for(let l=0;l<n.length;l++){const i=n[l];e.file(i.name,i)}const r=await e.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}});d(URL.createObjectURL(r)),p(r.size)}catch(e){a(`Ocorreu um erro ao comprimir os arquivos: ${e.message}`)}finally{u(!1)}},z=()=>{g([]),d(null),p(null),a("")};return s.jsxs("div",{className:"relative bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[c&&s.jsx(F,{text:t("components.fileCompressor.compressing")}),s.jsx("input",{type:"file",multiple:!0,onChange:v,className:"hidden",ref:h}),s.jsxs("div",{onDrop:w,onDragOver:C,onDragLeave:D,className:`flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-lg transition-colors ${k?"border-purple-600 bg-purple-50 dark:bg-gray-700":"border-gray-300 dark:border-gray-600"}`,children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("components.fileCompressor.dragAndDrop")}),s.jsx("button",{onClick:()=>h.current?.click(),disabled:c,className:"w-auto bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-700 transition-colors disabled:bg-purple-400 dark:disabled:bg-purple-800",children:t("components.fileCompressor.selectFiles")})]}),f&&s.jsx("p",{className:"text-red-500 mt-4 text-center",children:f}),n.length>0&&s.jsxs("div",{className:`mt-6 text-center ${c?"opacity-20":""}`,children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.fileCompressor.selectedFilesTitle")}),s.jsx("ul",{className:"text-left list-disc list-inside bg-gray-50 dark:bg-gray-700 p-4 rounded-md my-4 max-h-48 overflow-y-auto",children:n.map((e,r)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:[e.name," (",y(e.size),")"]},r))}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:S,disabled:c,className:"w-auto bg-green-500 text-white font-bold py-2 px-6 rounded-md hover:bg-green-600 transition-colors disabled:bg-green-300 dark:disabled:bg-green-800",children:t("components.fileCompressor.compressButton")}),s.jsx("button",{onClick:z,className:"w-auto bg-gray-500 text-white font-bold py-2 px-6 rounded-md hover:bg-gray-600 transition-colors",children:t("components.fileCompressor.clear")})]}),x&&s.jsxs("div",{className:"mt-6",children:[s.jsx("p",{className:"text-lg font-semibold dark:text-gray-200",children:t("components.fileCompressor.zipReadyTitle")}),s.jsx("p",{className:"font-bold text-green-600 dark:text-green-400",children:y(N)}),s.jsx("a",{href:x,download:t("components.fileCompressor.downloadName"),className:"mt-4 inline-block bg-blue-500 text-white font-bold py-2 px-8 rounded-md hover:bg-blue-600 transition-colors",children:t("components.fileCompressor.download")})]})]})]})};export{U as default};
